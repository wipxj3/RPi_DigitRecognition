#!/usr/bin/env python
# -*- coding: utf-8 -*-
__author__ = 'dexter'

import time

import cv2


class CaptureImage():
    def __init__(self):
        #capture from camera at location 0
        capture = cv2.VideoCapture(0)
        #set the width and height
        capture.set(3, 352)
        capture.set(4, 288)
	cv2.rectangle(capture, (140,60),(500,420), cv.RGB(0, 255, 255), 3, 8, 0)
        self.ret, self.img = capture.read()
	self.img_gray = cv2.cvtColor(self.img, cv2.COLOR_RGB2GRAY)
	time.sleep(2)
        self.imagePath = 'capture/'
        self.imageIndex = self.imagePath + self.getTime() + '_capture'
        #cv2.cv.SaveImage(self.imageIndex + '.png', self.img)
        cv2.imwrite(self.imageIndex + '.png', self.img_gray)
	cv2.VideoCapture(0).release()

    def getImageIndex(self):
        return self.imageIndex

    def getTime(self):
        t = time.localtime()
        timestamp = str(t.tm_hour) + '_' + str(t.tm_min) + '_' + str(t.tm_sec)
        return timestamp



if __name__ == '__main__':
    capture = CaptureImage()
    image = capture.getImageIndex()
    print 'Saved as ' + image
''''''
